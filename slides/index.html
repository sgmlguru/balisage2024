<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Adventures in Mainframes, Text-based Messaging, and iXML</title>
		
		<!-- Uncomment for filesystem run -->

		<!--<link rel="stylesheet" href="../../reveal.js/dist/reset.css">
		<link rel="stylesheet" href="../../reveal.js/dist/reveal.css">
		<link rel="stylesheet" href="../../reveal.js/dist/theme/black.css">
		
		<!-\- Theme used for syntax highlighted code -\->
		<link rel="stylesheet" href="../../reveal.js/plugin/highlight/monokai.css">-->
		
		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">
		
		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<section data-background="img/ICT_1301_Gothenburg_1962.jpg" data-background-size="100%" data-background-opacity="0.40">
						<h2>Adventures in Mainframes, Text-based Messaging, and iXML</h2>
						<h5>ari.nordstrom@gmail.com</h5>
					</section>
				</section>
				
				
				<!-- S-Series and messaging -->
				<section>
					<section data-background="img/Boeing_company_Boeing_707_N68657.jpg" data-background-size="100%" data-background-opacity="0.40">
						<h3>The S-Series and Exchanging Parts Information</h3>
					</section>
					
					<!-- The S-series, 30+ years ago -->
					<!-- S1000D, started as SGML, now XML, techpubs -->
					<section>
						<h3>Aerospace and Techpubs</h3>
						
						<img src="img/TF33_engine_at_Davis-Monthan_AFB_1984.jpg" alt="TF33 engine repair" style="width: 60%"/>
						
						<aside class="notes">
							<p>FAA, servicing, parts, logistics</p>
							<p>Text-based formats and mainframes</p>
							<p>Things in aerospace live for decades</p>
						</aside>
					</section>
					
					<section>
						<h3>Standards and SGML</h3>
						
						<div class="r-stack">
							<img src="img/Bal2024nord012803.gif" alt="ATA 100/2200 chapterisation" style="width: 60%" class="fade-in fade-out"/>
							
							<img src="img/screenshot-s1000d-ipd-sgml.png" alt="S1000D IPD SGML example" style="width: 60%" class="fragment current-visible"/>
						</div>
						
						<aside class="notes">
							<p>ATA 100 and 2200 (NEXT)</p>
							<p>S1000D - SGML</p>
							<p>Note S1000D now XML</p>
						</aside>
					</section>
					
					<!-- Also, messaging, what it does and the context -->
					<section>
						<h3>Building and Maintaining Aerospace Equipment</h3>
						
						<img src="img/cfm56-engine.jpg" alt="CFM56 engine" style="width: 60%"/>
						
						<aside class="notes">
							<p>Hundreds (thousands) of partners/nations</p>
							<p>Engines develop and change over time</p>
							<p>Initial provisioning => parts information exchange</p>
							<p>Decades!</p>
							<p>No parts => planes grounded</p>
						</aside>
					</section>
					
					<section>
						<h3>Messaging and S2000M</h3>
						
						<div class="r-stack">
							<img src="img/s2000m-2.1-cover.png" alt="S2000M issue 2.1 cover page" style="width: 40%"/>
							<img src="img/Woman_inspecting_FOSDIC_film.jpg" alt="Woman inspecting FOSDIC film" style="width: 50%" class="fragment"/>
						</div>
						
						<p class="fragment">Just customise the mainframe</p>
						
						<aside class="notes">
							<p>Messaging - initial, mods, observations, etc</p>
							<p>Text-based (ISO) (NEXT)</p>
							<p>Aerospace industry conservative</p>
							<p>Old system (1960s mainframe) adapted</p>
							<p>Which is fine and well, until</p>
						</aside>
					</section>
					
					<!-- Until the day the word comes that the building with the mainframe will be torn down -->
					<!-- Explanation of mainframe age, upgrade 35 years ago -->
					<section>
						<h3>Uh-Oh</h3>
						
						<img src="img/bulldozer.jpg" alt="Bulldozer" style="width: 50%"/>
						
						<aside class="notes">
							<p>House w/ mainframe to be demolished</p>
							<p>Started in late 60s</p>
							<p>Upgraded to S2000M in late 80s and early 90s</p>
						</aside>
					</section>
				</section>
				
				
				<!-- S2000M format -->
				<section data-background="img/screenshot-s2000m-page.png" data-background-size="100%" data-background-opacity="0.07">
					<section>
						<h3>A 30-Year Old Text Format...</h3>
					</section>
					
					<section>
						<h3>S2000M</h3>
						<ul>
							<li>First production issue was 2.1 in 1992</li>
							<li>The work started a decade earlier</li>
						</ul>
						
						<!-- Add messaging image -->
						<img src="img/cropped-S2000M_logo-1.png" alt="S2000M logo" style="width: 30%"/>
						<p><a href="https://www.s2000m.org/">https://www.s2000m.org/</a></p>
					</section>
					
					<section>
						<h3>Types of Messages</h3>
						<ul>
							<li>Provisioning data</li>
							<li>Observations and customer-provided data</li>
							<li>Codification requests from a contractor</li>
							<li>Codification data to the contractor</li>
						</ul>
						
						<p class="fragment">All in all, 8 distinct types (plus one for error messages)</p>
						<p class="fragment">Think of it as a (complex) email thread</p>
					</section>
					
					<section>
						<h3>Structure</h3>
						
						<img src="img/message-structure.png" alt="General message structure (screenshot from spec)" style="width: 60%"/>
						
						<aside class="notes">
							<p>Left to right</p>
							<p>Headers and trailers</p>
							<p>Segments and child segments</p>
							<p>Lists of key/value pairs</p>
						</aside>
					</section>
					
					<section>
						<h3>Segments</h3>
						
						<div class="r-stack">
							<p class="fade-out"><span class="fragment highlight-current-blue">SEG</span>+<span class="fragment highlight-current-red">ABC:123</span>+<span class="fragment highlight-current-red">DEF:456</span>'</p>
							<p class="fade-in">SEG<span class="fragment highlight-green">+</span>ABC:123<span class="fragment highlight-green">+</span>DEF:456<span class="fragment highlight-blue">'</span></p>
						</div>
						
						<aside class="notes">
							<p>Segment name</p>
							<p>Data units</p>
							<p>Separators</p>
							<p>Segment end</p>
						</aside>
					</section>
					
					<section>
						<h3>Data Units ("TEI")</h3>
						
						<div>
							<p><span class="fragment highlight-current-red">ABC</span>:<span class="fragment highlight-current-blue">123</span></p>
							<p class="fragment"><span class="fragment highlight-current-red">ABC</span>:<span class="fragment highlight-blue">12345</span>:<span class="fragment highlight-blue">AB12</span>:<span class="fragment highlight-blue">345</span></p>
						</div>
						
						<aside class="notes">
							<p>Data units</p>
							<p>Text element identifier (TEI)</p>
							<p>Text element</p>
							<p>Composite data units</p>
						</aside>
					</section>
					
					<section>
						<h3>Data Typing</h3>
						
						<img src="img/character-set-level-a.png" alt="Allowed characters" style="width: 50%"/>
					</section>
					
					<section>
						<h3>Data Typing</h3>
						<div>
							<p>a3</p>
							<p><q>ABC</q></p>
						</div>
					</section>
					
					<section>
						<h3>Data Typing</h3>
						<div>
							<p>an..5</p>
							<p><q>A2B3C</q>, <q>A</q>, <q></q></p>
						</div>
					</section>
					
					<section>
						<h3>Data Typing</h3>
						
						<img src="img/segment-data-types.png" alt="Segment data types" style="width: 90%"/>
						
						<p>TEIs all have well-defined (and narrow) data typing</p>
						
						<aside class="notes">
							<p>TEIs all have well-defined and narrow data typing</p>
						</aside>
					</section>
					
					<section>
						<h3>CSNIPD Structure</h3>
						
						<div>
							<img src="img/Bal2024nord012801.png" alt="CSNIPD message structure" style="width: 70%; vertical-align: top"/>
						</div>
						
					</section>
					
					<section>
						<h3>CSNIPD Segments</h3>
						
						<div>
							<img src="img/Bal2024nord012802.png" alt="CSNIPD segments defined in spec (part 1)" style="width: 40%; vertical-align: top"/>
							<img src="img/csnipd-segments-2.png" alt="CSNIPD segments defined in spec (part 2)" style="width: 40%; vertical-align: top"/>
						</div>
						
						<aside class="notes">
							<p>They've helpfully expanded the names of the actual TEIs</p>
							<p>CSNIPD, having to do with initial provisioning of parts, is a big one.</p>
							<p>Most of the others are shorter, as they need to deal with things declared here</p>
						</aside>
						
					</section>
					
					<section>
						<h3>CSNIPD Example</h3>
						
						<img src="img/csnipd-example.png" alt="CSNIPD message example from the S2000M spec" style="width: 45%"/>
						
						<aside class="notes">
							<p>Initial provisioning, so, again, rather big</p>
							<p>The CSNIPD is then commented on, amended</p>
						</aside>
					</section>
					
					<section>
						<p>...and 7 other message types</p>
					</section>
					
				</section>
				
				
				<!-- Forcing a Change -->
				<section data-background="img/Supposedly_Isaac_Newton_apple_tree.png" data-background-size="100%" data-background-opacity="0.40">
					
					<section>
						<h3>Inertia</h3>
					</section>
					
					<section>
						<p>Aerospace is a surprisingly conservative industry</p>
						
						<ul class="fragment">
							<li>No parts means planes are grounded</li>
							<li>Grounding planes is ridiculously expensive</li>
						</ul>
						
						<p class="fragment">You need a motivator!</p>
						
						<aside class="notes">
							<p>Why? Due to a simple, basic truth about the industry. (NEXT)</p>
							<p>Ask Boeing how much it costs</p>
							<p>You need something to drive the change (NEXT)</p>
						</aside>
					</section>
					
					<section>
						<img src="img/bulldozer.jpg" alt="Bulldozer" style="width: 50%"/>
					</section>
					
					<section>
						<p>But:</p>
						<ul>
							<li>S2000M 2.1 is a contract</li>
							<li>Very little time</li>
							<li>No real off-the-shelf alternatives</li>
						</ul>
						
						<p class="fragment">Also, do we really want to implement a 30+ old standard now?</p>
						
						<aside class="notes">
							<p>There is 7.1 but upgrade not feasible now (later, sure!)</p>
							<p>That building is coming down SOON</p>
							<p>Off-the-shelf</p>
							<p>Implementing something from scratch?</p>
						</aside>
					</section>
					
					<section>
						<p>Is there anything else we can do?</p>
						<img src="img/ixml-logo.png" alt="iXML logo" style="width: 20%" class="fragment"/>
						
						<aside class="notes">
							<p>I guess the title gave it away</p>
						</aside>
					</section>
					
				</section>
				
				
				<!-- iXML -->
				<section data-background="img/ixml-logo.png" data-background-size="50%" data-background-opacity="0.25">
					
					<section>
						<h3>S2000M 2.1 as an iXML grammar?</h3>
						
						<p><a href="https://invisiblexml.org/">https://invisiblexml.org/</a></p>
						
						<aside class="notes">
							<p>I won't explain it further, but...</p>
							<p>I'd done an iXML project recently (XML Prague paper)</p>
						</aside>
					</section>
					
					<section>
						<h3>S2000M 2.1 as an iXML Grammar?</h3>
						
						<p>Given this made-up CSNIPD message...</p>
						
						<pre class="txt" style="font-size: 8pt;">
							<code data-trim data-noescape data-line-numbers="|4|5|10-11">UNH+123456+CD3456:EF1:FD3:C1:ABC123+1234567890ABCDEFGHIJ012345678912345+12:C'
IPH+IPP:F61170026+MTP:CSNIPD+ISS:D1+TOD:F6117+ADD:D1234+FID:S+MOI:1X+DRS:004+DRD:201088+LGE:UK+IPS:LANDING GEAR ASSY+DRR:AB123456'
VAS+CHG:N+SID:12345:X1234999999999999+SNS:1234:123456789'
OHS+OSN:1+OBS:TESTING THIS'
CAS+CHG:B+CSN:0123456789123+ISN:ABC+IND:9+RFS:0+QNA:123+TQL:ABCDE+PNR:01234567890+MFC:QWERT+NSN:1234:123456789'
CBS+ASP:1+NIL:Q+RTX:1234567890123456+SMF:X+MFM:THIS IS TEXT+DFL:THIS IS MORE TEXT'
CCS+UCE:ABCDEFGH+UCA:123456+ICY:AB'
CDS+CTL:1234567+ESC:9+MAP:12+CSR:321'
CES+CHG:A+SRV:ABC+SMR:654321+RMQ:12345+ROQ:98765'
CJS+CHG:C+MOV:BA'
CKS+CHG:D+EFY:ABCDEFGH'
CFS+CHG:A+RFD:1234567'
CIS+CHG:B+ILS:09876543211234567890'
PAS+CHG:F+PNR:123456789123456789123456789+MFC:EDCBA+DFP:THIS IS A DFP TEXT+INC:12345+NSN:1234:123456789+RNC:7+RNV:5+RNJ:3'
PBS+UOI:AB+SPQ:0123+TOP:QW+ITY:ER+SPC:0+PLT:12+STR:9+SLC:X+PLC:Y+PCD:W'
PCS+UOM:AB+QUI:1234'
PDS+UPR:123456789012+CUR:ABC+MSQ:54321+PBD:1:2:3000:4:5:11111111'
PES+CRT:123+SRA:21+MTI:123456:AB+TBI:123456:CD+TSI:654321:BD+ALI:987654:XY+TLF:123'
PFS+DMC:ABC123+HAZ:ED12+PIC:8+FTC:X+PSC:Q+ESD:0+CMK:9'
PGS+SUU:AB345678901234+SPU:CD345678901234+WUU:AB34567+WPU:CD34567'
UNT+123456+ABCD1234567812'</code>
						</pre>
						
						<aside class="notes">
							<p>Segments and data units (TEIs) - note segend</p>
							<p>Composite TEIs</p>
							<p>...and segment nesting (not in the text format itself!)</p>
						</aside>
					</section>
					
					<section>
						<h3>S2000M 2.1 as an iXML Grammar?</h3>
						
						<p>...and this iXML grammar</p>
						
						<pre class="txt" style="font-size: 8pt;">
							<code data-trim data-noescape data-line-numbers="|97|125|112|155">{
	This is an iXML grammar for S2000M CSNIPD messages.
	S2000M spec 2.1: https://www.s2000m.org/S2000M/S2000M%20Issue%202.1%20CP1-4.pdf
	iXML information: https://invisiblexml.org/

	Grammar tested with https://johnlumley.github.io/jwiXML.xhtml
}



CSNIPD = UNH, IPH, VAS+, OHS*, CAS+, PAS*, UNT .

@segend = -"'", (#9 | #a0 | #a | #d)* .
-sep = -"+" .
-comp-sep = -":" .

-alpha = [L] .
-num = [N] .
-other-level-a = [" !.,(;&&lt;&gt;%*=)"; #22] .
-an = (alpha | num | other-level-a) .

-num4 = num, num, num, num .
-num9 = num, num, num, num, num, num, num, num, num .
-num0-2 = (num? | num, num) .
-num0-3 = (...) .
-num0-4 = (...) .
-num0-5 = (...) .
-num0-6 = (...) .
-num0-12 = (...) .
-an2 = an, an .
-an3 = an, an, an .
-an4 = (...) .
-an5 = (...) .
-an6 = (...) .
-an7 = (...) .
-an8 = (...) .
-an9 = (...) .
-an13 = (...) .
-an14 = (...) .
-an0-2 = (an? | an, an) .
-an0-3 = (...) .
-an0-4 = (...) .
-an0-5 = (...) .
-an0-6 = (...) .
-an0-7 = (...) .
-an0-8 = (...) .
-an0-14 = (...) .
-an0-16 = (...) .
-an0-19 = (...) .
-an0-20 = (...) .
-an0-32 = (...) .
-an0-35 = (...) .

no-segments-0074 = num0-6 .
msg-no-0062 = an0-14 .
msg-type-0065 = an0-6 .
msg-version-nbr-0052 = an0-3 .
msg-rel-nbr-0054 = an0-3 .
ctrl-agency-0051 = an0-2 .
assoc-assign-code-0057 = an0-6 .

message-identifier-S009 = msg-type-0065, comp-sep, msg-version-nbr-0052, comp-sep, msg-rel-nbr-0054, comp-sep, ctrl-agency-0051, comp-sep, assoc-assign-code-0057? .
common-access-ref-0068 = an0-35 .
sequence-transfers-0070 = num0-2 .

first-last-transfer-0073 = alpha . {C or F - should it be checked here?}
transfer-status-S010 = sequence-transfers-0070, comp-sep, first-last-transfer-0073 .

UNH = -"UNH", sep, msg-no-0062, sep, message-identifier-S009, sep, common-access-ref-0068, sep, transfer-status-S010, segend .
UNT = -"UNT", sep, no-segments-0074, sep, msg-no-0062, segend .

IPP = -"IPP", comp-sep, an9 .
MTP = -"MTP", comp-sep, an0-6 .
ISS = -"ISS", comp-sep, an, an .
TOD = -"TOD", comp-sep, an5 .
ADD = -"ADD", comp-sep, an5 .
FID = -"FID", comp-sep, alpha .
MOI = -"MOI", comp-sep, an, an .
DRS = -"DRS", comp-sep, num, num, num .
DRD = -"DRD", comp-sep, num, num, num, num, num, num .
LGE = -"LGE", comp-sep, alpha, alpha .
IPS = -"IPS", comp-sep, an0-19 .
DRR = "DRR", comp-sep, an8 .

IPH = -"IPH", sep, IPP, sep, MTP, (sep, ISS)?, sep, TOD, sep, ADD, sep, FID, sep, MOI, sep, DRS, sep, DRD, sep, LGE, sep, IPS, (sep, DRR)?, segend .

CHG = -"CHG", comp-sep, alpha .

mfc = an5 .
pnr = an0-32 .
SID = -"SID", comp-sep, mfc, comp-sep, pnr .

nsc = num4 .
nin = num9 .
SNS = -"SNS", (comp-sep, nsc)?, (comp-sep, nin)? .

VAS = -"VAS", sep, CHG, sep, SID, (sep, SNS)?, segend .

OSN = -"OSN", comp-sep, num .
OBS = -"OBS", comp-sep, an* . {This is 0-130 chars}

OHS = -"OHS", sep, OSN, sep, OBS, segend .

CSN = -"CSN", comp-sep, an13 .
ISN = -"ISN", comp-sep, an3 .
IND = -"IND", comp-sep, num .
RFS = -"RFS", comp-sep, num .
QNA = -"QNA", comp-sep, an0-4 .
TQL = -"TQL", comp-sep, an0-5 .
PNR = -"PNR", comp-sep, -pnr .
MFC = -"MFC", comp-sep, -mfc .
NSN = -"NSN", comp-sep, nsc, (comp-sep, nin)? .

CAS = -"CAS", sep, CHG, sep, CSN, sep, ISN, (sep, IND)?, (sep, RFS)?, (sep, QNA)?, (sep, TQL)?, (sep, PNR)?, (sep, MFC)?, (sep, NSN)?, segend, (CBS?, CCS?, CDS?, CES, CFS?, CIS?)? .

ASP = -"ASP", comp-sep, num .
NIL = -"NIL", comp-sep, an .
RTX = -"RTX", comp-sep, an0-16 .
SMF = -"SMF", comp-sep, alpha .
MFM = -"MFM", comp-sep, an* {0-40 alphanumeric chars} .
DFL = -"DFL", comp-sep, an* {0-130 alphanumeric chars} .

CBS = -"CBS", (sep, ASP)?, (sep, NIL)?, (sep, RTX)?, (sep, SMF)?, (sep, MFM)?, (sep, DFL)?, segend .

UCE = -"UCE", comp-sep, an8 .
UCA = -"UCA", comp-sep, an6 .
ICY = -"ICY", comp-sep, an, an .

CCS = -"CCS", (sep, UCE)?, (sep, UCA)?, (sep, ICY)?, segend .

CTL = -"CTL", comp-sep, an7 .
ESC = -"ESC", comp-sep, num .
MAP = -"MAP", comp-sep, num0-2 .
CSR = -"CSR", comp-sep, num0-3 .

CDS = -"CDS", (sep, CTL)?, (sep, ESC)?, (sep, MAP)?, (sep, CSR)?, segend .

SRV = -"SRV", comp-sep, an0-3 .
SMR = -"SMR", comp-sep, an0-6 .
RMQ = -"RMQ", comp-sep, num0-5 .
ROQ = -"ROQ", comp-sep, num0-5 .

CES = -"CES", sep, CHG, sep, SRV, (sep, SMR)?, (sep, RMQ)?, (sep, ROQ)?, segend, CJS* .

RFD = -"RFD", comp-sep, an0-7 .

CFS = -"CFS", sep, CHG, sep, RFD, segend .

ILS = -"ILS", comp-sep, an0-20 .

CIS = -"CIS", sep, CHG, sep, ILS, segend .

MOV = -"MOV", comp-sep, an0-2 .

CJS = -"CJS", sep, CHG, sep, MOV, segend, CKS* .

EFY = -"EFY", comp-sep, an0-8 .

CKS = -"CKS", sep, CHG, sep, EFY, segend .


DFP = -"DFP", comp-sep, an* {0-130 alphanumeric} .
INC = -"INC", comp-sep, an5 .
RNC = -"RNC", comp-sep, an .
RNV = -"RNV", comp-sep, num .
RNJ = -"RNJ", comp-sep, num .

PAS = -"PAS", sep, CHG, sep, PNR, sep, MFC, (sep, DFP)?, (sep, INC)?, (sep, NSN)?, (sep, RNC)?, (sep, RNV)?, (sep, RNJ)?, segend, (PBS?, PCS?, PDS?, PES?, PFS?, PGS?)? .

UOI = -"UOI", comp-sep, alpha, alpha .
SPQ = -"SPQ", comp-sep, num0-4 .
TOP = -"TOP", comp-sep, an2 .
ITY = -"ITY", comp-sep, an2 .
SPC = -"SPC", comp-sep, num .
PLT = -"PLT", comp-sep, num0-2 .
STR = -"STR", comp-sep, num .
SLC = -"SLC", comp-sep, an .
PLC = -"PLC", comp-sep, an .
PCD = -"PCD", comp-sep, an0-2 .

PBS = -"PBS", (sep, UOI)?, (sep, SPQ)?, (sep, TOP)?, (sep, ITY)?, (sep, SPC)?, (sep, PLT)?, (sep, STR)?, (sep, SLC)?, (sep, PLC)?, (sep, PCD)?, segend .

UOM = -"UOM", comp-sep, an2 .
QUI = -"QUI", comp-sep, num0-4 .

PCS = -"PCS", (sep, UOM)?, (sep, QUI)?, segend .

UPR = -"UPR", comp-sep, num0-12 .
CUR = -"CUR", comp-sep, alpha, alpha, alpha .
MSQ = -"MSQ", comp-sep, num0-5 .

qty = num0-5 .
upr = num0-12 .

PBD = -"PBD", comp-sep, qty, comp-sep, qty, comp-sep, upr, (comp-sep, qty, comp-sep, qty, comp-sep, upr)* {0-2 repetitions} .

PDS = -"PDS", (sep, UPR)?, (sep, CUR)?, (sep, MSQ)?, (sep, PBD)?, segend .

CRT = -"CRT", comp-sep, num0-3 .
SRA = -"SRA", comp-sep, num0-2 .
-alpha0-2 = (alpha? | alpha, alpha) .
tbf = num0-6 .
tcm = alpha0-2 .
MTI = -"MTI", (comp-sep, tbf)?, (comp-sep, tcm)? .
tbo = num0-6 .
tco = alpha0-2 .
TBI = -"TBI", (comp-sep, tbo)?, (comp-sep, tco)? .
tsv = num0-6 .
tcs = alpha0-2 .
TSI = -"TSI", (comp-sep, tsv)?, (comp-sep, tcs)? .
aul = num0-6 .
tca = alpha0-2 .
ALI = -"ALI", (comp-sep, aul)?, (comp-sep, tca)? .
TLF = -"TLF", comp-sep, num0-3 .

PES = -"PES", (sep, CRT)?, (sep, SRA)?, (sep, MTI)?, (sep, TBI)?, (sep, TSI)?, (sep, ALI)?, (sep, TLF)?, segend .

DMC = -"DMC", comp-sep, an0-6 .

HAZ = -"HAZ", comp-sep, an4 .
PIC = -"PIC", comp-sep, num .
FTC = -"FTC", comp-sep, an .
PSC = -"PSC", comp-sep, an .
ESD = -"ESD", comp-sep, num .
CMK = -"CMK", comp-sep, num .

PFS = -"PFS", (sep, DMC)?, (sep, HAZ)?, (sep, PIC)?, (sep, FTC)?, (sep, PSC)?, (sep, ESD)?, (sep, CMK)?, segend .

SUU = -"SUU", comp-sep, an14 .
SPU = -"SPU", comp-sep, an14 .
WUU = -"WUU", comp-sep, an7 .
WPU = -"WPU", comp-sep, an7 .

PGS = -"PGS", (sep, SUU)?, (sep, SPU)?, (sep, WUU)?, (sep, WPU)?, segend .</code>
						</pre>
						
						<aside class="notes">
							<p>Segments - note segend</p>
							<p>Data units (TEIs and their values)</p>
							<p>Composite TEIs</p>
							<p>...and segment nesting (not in the text format itself!)</p>
						</aside>
					</section>
					
					<section>
						<h3>S2000M 2.1 as an iXML Grammar?</h3>
						
						<p>We get this XML serialisation</p>
						
						<pre class="xml" style="font-size: 8pt;">
							<code data-trim data-noescape data-line-numbers="|17-30|17|18|56-59|85-92">&lt;CSNIPD&gt;
    &lt;UNH segend=&quot;&amp;#10;&quot;&gt;
        &lt;msg-no-0062&gt;123456&lt;/msg-no-0062&gt;
        &lt;message-identifier-S009&gt;
            &lt;msg-type-0065&gt;CD3456&lt;/msg-type-0065&gt;
            &lt;msg-version-nbr-0052&gt;EF1&lt;/msg-version-nbr-0052&gt;
            &lt;msg-rel-nbr-0054&gt;FD3&lt;/msg-rel-nbr-0054&gt;
            &lt;ctrl-agency-0051&gt;C1&lt;/ctrl-agency-0051&gt;
            &lt;assoc-assign-code-0057&gt;ABC123&lt;/assoc-assign-code-0057&gt;
        &lt;/message-identifier-S009&gt;
        &lt;common-access-ref-0068&gt;1234567890ABCDEFGHIJ012345678912345&lt;/common-access-ref-0068&gt;
        &lt;transfer-status-S010&gt;
            &lt;sequence-transfers-0070&gt;12&lt;/sequence-transfers-0070&gt;
            &lt;first-last-transfer-0073&gt;C&lt;/first-last-transfer-0073&gt;
        &lt;/transfer-status-S010&gt;
    &lt;/UNH&gt;
    &lt;IPH segend=&quot;&amp;#10;&quot;&gt;
        &lt;IPP&gt;F61170026&lt;/IPP&gt;
        &lt;MTP&gt;CSNIPD&lt;/MTP&gt;
        &lt;ISS&gt;D1&lt;/ISS&gt;
        &lt;TOD&gt;F6117&lt;/TOD&gt;
        &lt;ADD&gt;D1234&lt;/ADD&gt;
        &lt;FID&gt;S&lt;/FID&gt;
        &lt;MOI&gt;1X&lt;/MOI&gt;
        &lt;DRS&gt;004&lt;/DRS&gt;
        &lt;DRD&gt;201088&lt;/DRD&gt;
        &lt;LGE&gt;UK&lt;/LGE&gt;
        &lt;IPS&gt;LANDING GEAR ASSY&lt;/IPS&gt;
        &lt;DRR&gt;DRRAB123456&lt;/DRR&gt;
    &lt;/IPH&gt;
    &lt;VAS segend=&quot;&amp;#10;&quot;&gt;
        &lt;CHG&gt;N&lt;/CHG&gt;
        &lt;SID&gt;
            &lt;mfc&gt;12345&lt;/mfc&gt;
            &lt;pnr&gt;X1234999999999999&lt;/pnr&gt;
        &lt;/SID&gt;
        &lt;SNS&gt;
            &lt;nsc&gt;1234&lt;/nsc&gt;
            &lt;nin&gt;123456789&lt;/nin&gt;
        &lt;/SNS&gt;
    &lt;/VAS&gt;
    &lt;OHS segend=&quot;&amp;#10;&quot;&gt;
        &lt;OSN&gt;1&lt;/OSN&gt;
        &lt;OBS&gt;TESTING THIS&lt;/OBS&gt;
    &lt;/OHS&gt;
    &lt;CAS segend=&quot;&amp;#10;&quot;&gt;
        &lt;CHG&gt;B&lt;/CHG&gt;
        &lt;CSN&gt;0123456789123&lt;/CSN&gt;
        &lt;ISN&gt;ABC&lt;/ISN&gt;
        &lt;IND&gt;9&lt;/IND&gt;
        &lt;RFS&gt;0&lt;/RFS&gt;
        &lt;QNA&gt;123&lt;/QNA&gt;
        &lt;TQL&gt;ABCDE&lt;/TQL&gt;
        &lt;PNR&gt;01234567890&lt;/PNR&gt;
        &lt;MFC&gt;QWERT&lt;/MFC&gt;
        &lt;NSN&gt;
            &lt;nsc&gt;1234&lt;/nsc&gt;
            &lt;nin&gt;123456789&lt;/nin&gt;
        &lt;/NSN&gt;
        &lt;CBS segend=&quot;&amp;#10;&quot;&gt;
            &lt;ASP&gt;1&lt;/ASP&gt;
            &lt;NIL&gt;Q&lt;/NIL&gt;
            &lt;RTX&gt;1234567890123456&lt;/RTX&gt;
            &lt;SMF&gt;X&lt;/SMF&gt;
            &lt;MFM&gt;THIS IS TEXT&lt;/MFM&gt;
            &lt;DFL&gt;THIS IS MORE TEXT&lt;/DFL&gt;
        &lt;/CBS&gt;
        &lt;CCS segend=&quot;&amp;#10;&quot;&gt;
            &lt;UCE&gt;ABCDEFGH&lt;/UCE&gt;
            &lt;UCA&gt;123456&lt;/UCA&gt;
            &lt;ICY&gt;AB&lt;/ICY&gt;
        &lt;/CCS&gt;
        &lt;CDS segend=&quot;&amp;#10;&quot;&gt;
            &lt;CTL&gt;1234567&lt;/CTL&gt;
            &lt;ESC&gt;9&lt;/ESC&gt;
            &lt;MAP&gt;12&lt;/MAP&gt;
            &lt;CSR&gt;321&lt;/CSR&gt;
        &lt;/CDS&gt;
        &lt;CES segend=&quot;&amp;#10;&quot;&gt;
            &lt;CHG&gt;A&lt;/CHG&gt;
            &lt;SRV&gt;ABC&lt;/SRV&gt;
            &lt;SMR&gt;654321&lt;/SMR&gt;
            &lt;RMQ&gt;12345&lt;/RMQ&gt;
            &lt;ROQ&gt;98765&lt;/ROQ&gt;
            &lt;CJS segend=&quot;&amp;#10;&quot;&gt;
                &lt;CHG&gt;C&lt;/CHG&gt;
                &lt;MOV&gt;BA&lt;/MOV&gt;
                &lt;CKS segend=&quot;&amp;#10;&quot;&gt;
                    &lt;CHG&gt;D&lt;/CHG&gt;
                    &lt;EFY&gt;ABCDEFGH&lt;/EFY&gt;
                &lt;/CKS&gt;
            &lt;/CJS&gt;
        &lt;/CES&gt;
        &lt;CFS segend=&quot;&amp;#10;&quot;&gt;
            &lt;CHG&gt;A&lt;/CHG&gt;
            &lt;RFD&gt;1234567&lt;/RFD&gt;
        &lt;/CFS&gt;
        &lt;CIS segend=&quot;&amp;#10;&quot;&gt;
            &lt;CHG&gt;B&lt;/CHG&gt;
            &lt;ILS&gt;09876543211234567890&lt;/ILS&gt;
        &lt;/CIS&gt;
    &lt;/CAS&gt;
    &lt;PAS segend=&quot;&amp;#10;&quot;&gt;
        &lt;CHG&gt;F&lt;/CHG&gt;
        &lt;PNR&gt;123456789123456789123456789&lt;/PNR&gt;
        &lt;MFC&gt;EDCBA&lt;/MFC&gt;
        &lt;DFP&gt;THIS IS A DFP TEXT&lt;/DFP&gt;
        &lt;INC&gt;12345&lt;/INC&gt;
        &lt;NSN&gt;
            &lt;nsc&gt;1234&lt;/nsc&gt;
            &lt;nin&gt;123456789&lt;/nin&gt;
        &lt;/NSN&gt;
        &lt;RNC&gt;7&lt;/RNC&gt;
        &lt;RNV&gt;5&lt;/RNV&gt;
        &lt;RNJ&gt;3&lt;/RNJ&gt;
        &lt;PBS segend=&quot;&amp;#10;&quot;&gt;
            &lt;UOI&gt;AB&lt;/UOI&gt;
            &lt;SPQ&gt;0123&lt;/SPQ&gt;
            &lt;TOP&gt;QW&lt;/TOP&gt;
            &lt;ITY&gt;ER&lt;/ITY&gt;
            &lt;SPC&gt;0&lt;/SPC&gt;
            &lt;PLT&gt;12&lt;/PLT&gt;
            &lt;STR&gt;9&lt;/STR&gt;
            &lt;SLC&gt;X&lt;/SLC&gt;
            &lt;PLC&gt;Y&lt;/PLC&gt;
            &lt;PCD&gt;W&lt;/PCD&gt;
        &lt;/PBS&gt;
        &lt;PCS segend=&quot;&amp;#10;&quot;&gt;
            &lt;UOM&gt;AB&lt;/UOM&gt;
            &lt;QUI&gt;1234&lt;/QUI&gt;
        &lt;/PCS&gt;
        &lt;PDS segend=&quot;&amp;#10;&quot;&gt;
            &lt;UPR&gt;123456789012&lt;/UPR&gt;
            &lt;CUR&gt;ABC&lt;/CUR&gt;
            &lt;MSQ&gt;54321&lt;/MSQ&gt;
            &lt;PBD&gt;
                &lt;qty&gt;1&lt;/qty&gt;
                &lt;qty&gt;2&lt;/qty&gt;
                &lt;upr&gt;3000&lt;/upr&gt;
                &lt;qty&gt;4&lt;/qty&gt;
                &lt;qty&gt;5&lt;/qty&gt;
                &lt;upr&gt;11111111&lt;/upr&gt;
            &lt;/PBD&gt;
        &lt;/PDS&gt;
        &lt;PES segend=&quot;&amp;#10;&quot;&gt;
            &lt;CRT&gt;123&lt;/CRT&gt;
            &lt;SRA&gt;21&lt;/SRA&gt;
            &lt;MTI&gt;
                &lt;tbf&gt;123456&lt;/tbf&gt;
                &lt;tcm&gt;AB&lt;/tcm&gt;
            &lt;/MTI&gt;
            &lt;TBI&gt;
                &lt;tbo&gt;123456&lt;/tbo&gt;
                &lt;tco&gt;CD&lt;/tco&gt;
            &lt;/TBI&gt;
            &lt;TSI&gt;
                &lt;tsv&gt;654321&lt;/tsv&gt;
                &lt;tcs&gt;BD&lt;/tcs&gt;
            &lt;/TSI&gt;
            &lt;ALI&gt;
                &lt;aul&gt;987654&lt;/aul&gt;
                &lt;tca&gt;XY&lt;/tca&gt;
            &lt;/ALI&gt;
            &lt;TLF&gt;123&lt;/TLF&gt;
        &lt;/PES&gt;
        &lt;PFS segend=&quot;&amp;#10;&quot;&gt;
            &lt;DMC&gt;ABC123&lt;/DMC&gt;
            &lt;HAZ&gt;ED12&lt;/HAZ&gt;
            &lt;PIC&gt;8&lt;/PIC&gt;
            &lt;FTC&gt;X&lt;/FTC&gt;
            &lt;PSC&gt;Q&lt;/PSC&gt;
            &lt;ESD&gt;0&lt;/ESD&gt;
            &lt;CMK&gt;9&lt;/CMK&gt;
        &lt;/PFS&gt;
        &lt;PGS segend=&quot;&amp;#10;&quot;&gt;
            &lt;SUU&gt;AB345678901234&lt;/SUU&gt;
            &lt;SPU&gt;CD345678901234&lt;/SPU&gt;
            &lt;WUU&gt;AB34567&lt;/WUU&gt;
            &lt;WPU&gt;CD34567&lt;/WPU&gt;
        &lt;/PGS&gt;
    &lt;/PAS&gt;
    &lt;UNT segend=&quot;&quot;&gt;
        &lt;no-segments-0074&gt;123456&lt;/no-segments-0074&gt;
        &lt;msg-no-0062&gt;ABCD1234567812&lt;/msg-no-0062&gt;
    &lt;/UNT&gt;
&lt;/CSNIPD&gt;</code>
						</pre>
						
						<aside class="notes">
							<p>Segments - note @segend</p>
							<p>Data units (TEIs and their values)</p>
							<p>Composite TEIs</p>
							<p>...and segment nesting (not in the text format itself!)</p>
						</aside>
					</section>
					
					<section>
						<h3>A Note About Data Types</h3>
						
						<pre class="txt" style="font-size: 18pt; text-align: center;">
							<code data-trim data-noescape>n0-3 = (n? | n, n | n, n, n ) .</code>
						</pre>
						
						<pre class="txt fragment" style="font-size: 18pt; text-align: center;">
							<code data-trim data-noescape>an0-130 = (an? | an, an | an, an, an | ...) .</code>
						</pre>
						
						<p class="fragment">This gets tedious very quickly</p>
						
						<aside class="notes">
							<p>Take note - I'll come back to this</p>
						</aside>
					</section>
					
				</section>
				
				
				<!-- XML -->
				<section data-background="img/Word_processors_at_NIHE.png" data-background-size="100%" data-background-opacity="0.40">
					
					<section>
						<h3>Now That I've Got the XML...</h3>
						
						<p>...wouldn't it be nice to author S2000M messages in it?</p>
					</section>
					
					<section>
						<h3>Validation</h3>
						
						<ul>
							<li>Schema (DTD)</li>
							<li>Schematron rules</li>
						</ul>
						
						<aside class="notes">
							<p>Together these should cover everything we need</p>
							<p>But rather than writing a DTD I generated it</p>
						</aside>
					</section>
					
					<section>
						<h3>Generating a DTD</h3>
						
						<!-- Minimum examples, maximum examples -->
						<div class="r-stack">
							<img class="current-visible" src="img/min-max-xml.png" alt="Min and max XML examples" style="width: 70%"/>
							<img class="fragment" src="img/generate-dtd.png" alt="Generating a DTD dialog in oXygen" style="width: 70%"/>
							
							<pre class="txt fragment" style="font-size: 20pt;">
								<code data-trim data-noescape data-line-numbers="1-35">&lt;!ELEMENT IPP (#PCDATA)&gt;
&lt;!ATTLIST IPP
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT MTP (#PCDATA)&gt;
&lt;!ATTLIST MTP
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT ISS (#PCDATA)&gt;
&lt;!ATTLIST ISS
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT TOD (#PCDATA)&gt;
&lt;!ATTLIST TOD
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT ADD (#PCDATA)&gt;
&lt;!ATTLIST ADD
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT FID (#PCDATA)&gt;
&lt;!ATTLIST FID
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT MOI (#PCDATA)&gt;
&lt;!ATTLIST MOI
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT DRS (#PCDATA)&gt;
&lt;!ATTLIST DRS
xmlns CDATA #FIXED &apos;&apos;&gt;

&lt;!ELEMENT DRD (#PCDATA)&gt;
&lt;!ATTLIST DRD
xmlns CDATA #FIXED &apos;&apos;&gt;</code>
							</pre>
						</div>
						
						<aside class="notes">
							<p>Create minimum and maximum examples</p>
							<p>Should be possible to generate</p>
							<p>Serialise to XML (NEXT)</p>
							<p>Generate DTD (NEXT)</p>
							<p>Some things can't be generated (NEXT)</p>
						</aside>
						
					</section>
					
					<section>
						<h3>Additions to the DTD</h3>
						
						<pre class="txt" style="font-size: 20pt;">
							<code data-trim data-noescape data-line-numbers="1-4|3">&lt;!ELEMENT CBS (ASP?,NIL?,RTX?,SMF?,MFM?,DFL?)&gt;
&lt;!ATTLIST CBS
level CDATA #FIXED &quot;2&quot;
segend CDATA #REQUIRED&gt;</code>
						</pre>
						
						<aside class="notes">
							<p>@level is nowhere to be found in the format itself</p>
							<p>But the spec defines it</p>
							<p>Don't generate too early</p>
							<p>DTD useful enough</p>
						</aside>
					</section>
					
					<section>
						<h3>Schematron</h3>
						
						<p>There are some obvious wins</p>
						
						<pre class="txt fragment" style="font-size: 16pt;">
							<code data-trim data-noescape>UNH = -"UNH", sep, msg-no-0062, ... segend .
								...
UNT = -"UNT", sep, ... msg-no-0062, segend .</code>
						</pre>
						
						<pre class="xml fragment" style="font-size: 16pt;">
							<code data-trim data-noescape>&lt;UNH segend="&amp;#10;">
	&lt;msg-no-0062>123456&lt;/msg-no-0062>
	...
&lt;/UNH>

...

&lt;UNT segend="">
	...
	&lt;msg-no-0062>ABCD1234567812&lt;/msg-no-0062>
&lt;/UNT></code>
						</pre>
						
						<aside class="notes">
							<p>Sanity checks: Message header and trailer</p>
							<p>msg-no-0062 should be the same</p>
							<p>Here, they are not</p>
						</aside>
						
					</section>
					
					<section>
						<h3>Schematron</h3>
						
						<p>Data typing is a lot easier in Schematron</p>
						
						<div class="fragment">
							<pre class="txt" style="font-size: 18pt;">
								<code data-trim data-noescape>an..20</code>
							</pre>
							
							<pre class="txt" style="font-size: 18pt;">
								<code data-trim data-noescape>-an0-20 = (an? | an, an | ...) .</code>
							</pre>
						</div>
						
						<div class="fragment">
							<pre class="xml" style="font-size: 10pt;">
								<code data-trim data-noescape>&lt;sch:rule context=&quot;CIS/ILS&quot;&gt;
    &lt;sch:assert test=&quot;string-length(text()) &amp;lt;=20&quot;&gt;The data type for ILS in segment CIS is &apos;an..20&apos; but the actual number of characters is &lt;sch:value-of select=&quot;string-length(text())&quot;/&gt;.&lt;/sch:assert&gt;
&lt;/sch:rule&gt;</code>
							</pre>
							
							<pre class="xml" style="font-size: 10pt;">
								<code data-trim data-noescape>&lt;sch:rule context=&quot;CIS/ILS&quot;&gt;
    &lt;sch:assert test=&quot;matches(text(), &apos;^([A-Z]|[0-9]|[ !\.,(;&amp;amp;&amp;lt;&amp;gt;%*=),&amp;#34;-/])+$&apos;)&quot;&gt;The data type for ILS in segment CIS is &apos;an..20&apos; but the actual characters used are &lt;sch:value-of select=&quot;.&quot;/&gt;.&lt;/sch:assert&gt;
&lt;/sch:rule&gt;</code>
							</pre>
						</div>
						
						<p class="fragment">These are generated from a spreadsheet provided by the working group</p>
						
						<aside class="notes">
							<p>Data typing is a lot easier in Schematron (NEXT)</p>
							<p>Remember those data types? (NEXT)</p>
							<p>SCH rules are a lot easier (NEXT)</p>
							<p>And I generated them</p>
						</aside>
						
					</section>
					
					<section>
						<p>(etc)</p>
					</section>
					
					<section>
						<h3>Authoring</h3>
						
						<div>
							<p>In oXygen or similar, it's a matter of adding a framework</p>
							<img src="img/CSNIPD-xml-with-css.png" style="width: 30%" alt="CSNIPD XML with some CSS"/>
						</div>
						
						<div class="fragment">
							<p>But really, a form-based approach (XForms!) is better</p>
						</div>
						
						<aside class="notes">
							<p>oXygen - CSS, schemas, etc (NEXT)</p>
							<p>A form-based approach easier (NEXT)</p>
						</aside>
						
					</section>
					
					<section>
						<h3>Publishing</h3>
						
						<p>Essentially a roundtrip</p>
						
						<pre class="xml" style="font-size: 9pt;">
							<code data-trim data-noescape>&lt;xsl:stylesheet
    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
    xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;
    xmlns:math=&quot;http://www.w3.org/2005/xpath-functions/math&quot;
    exclude-result-prefixes=&quot;xs math&quot;
    version=&quot;3.0&quot;&gt;
    
    &lt;!-- Converts S2MXML to S2000M 2.1 message format --&gt;
    
    &lt;xsl:output method=&quot;text&quot; indent=&quot;0&quot;/&gt;
    
    
    &lt;xsl:template match=&quot;/&quot;&gt;
        &lt;xsl:apply-templates select=&quot;*&quot;/&gt;
    &lt;/xsl:template&gt;
    
    
    &lt;!-- The message type is special and should only pass through --&gt;
    &lt;xsl:template
        match=&quot;CSNIPD&quot;
        priority=&quot;10&quot;&gt;
        &lt;xsl:apply-templates select=&quot;*&quot;/&gt;
    &lt;/xsl:template&gt;
    
    
    &lt;!-- Segments always have @segend; we don&apos;t want to process headers or trailers here --&gt;
    &lt;xsl:template match=&quot;*[@segend and not(self::UNH) and not(self::UNT)]&quot;&gt;
        &lt;xsl:value-of select=&quot;name(.) || &apos;+&apos;&quot;/&gt;
        &lt;xsl:for-each select=&quot;*[not(@segend)]&quot;&gt;
            &lt;xsl:choose&gt;
                &lt;!-- Composite elements --&gt;
                &lt;xsl:when test=&quot;*&quot;&gt;
                    &lt;xsl:value-of select=&quot;name(.) || &apos;+&apos;&quot;/&gt;
                    &lt;xsl:for-each select=&quot;*&quot;&gt;
                        &lt;xsl:value-of select=&quot;text()&quot;/&gt;
                        &lt;xsl:if test=&quot;following-sibling::*&quot;&gt;
                            &lt;xsl:value-of select=&quot;&apos;:&apos;&quot;/&gt;
                        &lt;/xsl:if&gt;
                    &lt;/xsl:for-each&gt;
                &lt;/xsl:when&gt;
                
                &lt;!-- Regular key/value data units --&gt;
                &lt;xsl:otherwise&gt;
                    &lt;xsl:value-of select=&quot;name(.) || &apos;:&apos; || normalize-space(text()[1])&quot;/&gt;
                &lt;/xsl:otherwise&gt;
            &lt;/xsl:choose&gt;
            
            &lt;!-- Separator if more data units follow (child segments should be excluded) --&gt;
            &lt;xsl:if test=&quot;following-sibling::*[not(@segend)]&quot;&gt;
                &lt;xsl:value-of select=&quot;&apos;+&apos;&quot;/&gt;
            &lt;/xsl:if&gt;
        &lt;/xsl:for-each&gt;
        
        &lt;!-- Segment end --&gt;
        &lt;xsl:text&gt;&amp;apos;&amp;#x0a;&lt;/xsl:text&gt;
        
        &lt;!-- Child segments --&gt;
        &lt;xsl:apply-templates select=&quot;*[@segend]&quot;/&gt;
    &lt;/xsl:template&gt;
    
    
    &lt;!-- Message headers and trailers --&gt;
    &lt;xsl:template match=&quot;UNH | UNT&quot;&gt;
        &lt;xsl:value-of select=&quot;name(.) || &apos;+&apos;&quot;/&gt;
        &lt;xsl:apply-templates select=&quot;*&quot; mode=&quot;UN&quot;/&gt;
        &lt;xsl:text&gt;&amp;apos;&amp;#x0a;&lt;/xsl:text&gt;
    &lt;/xsl:template&gt;
    
    
    &lt;!-- Header and trailer syntax differs from message body --&gt;
    &lt;xsl:template match=&quot;*&quot; mode=&quot;UN&quot;&gt;
        &lt;xsl:choose&gt;
            &lt;xsl:when test=&quot;*&quot;&gt;
                &lt;xsl:for-each select=&quot;*&quot;&gt;
                    &lt;xsl:value-of select=&quot;text()&quot;/&gt;
                    &lt;xsl:if test=&quot;following-sibling::*&quot;&gt;
                        &lt;xsl:value-of select=&quot;&apos;:&apos;&quot;/&gt;
                    &lt;/xsl:if&gt;
                &lt;/xsl:for-each&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
                &lt;xsl:value-of select=&quot;normalize-space(text())&quot;/&gt;
            &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
        &lt;xsl:if test=&quot;following-sibling::*&quot;&gt;
            &lt;xsl:value-of select=&quot;&apos;+&apos;&quot;/&gt;
        &lt;/xsl:if&gt;
    &lt;/xsl:template&gt;
    
    
    &lt;xsl:template match=&quot;text()&quot;&gt;
        &lt;xsl:value-of select=&quot;normalize-space(.)&quot;/&gt;
    &lt;/xsl:template&gt;
    
    
&lt;/xsl:stylesheet&gt;</code>
						</pre>
						
						<aside class="notes">
							<p>This is the entire XSLT for CSNIPD</p>
							<p>Other message formats can use a variation</p>
							<p>A few words about context (NEXT)</p>
						</aside>
					</section>
					
				</section>
				
				
				<!-- Context -->
				<section data-background="img/May_3_marks_70_years_since_first_jet_engine_test_at_AEDC_8377711.jpg" data-background-opacity="0.3" data-background-size="110%">
					
					<section>
						<h3>Context</h3>
					</section>
					
					<section>
						<img src="img/BillofMaterials2.jpg" alt="Bill of Materials example for a bicycle" style="width: 60%"/>
						
						<aside class="notes">
							<p>Engineering, service, manufacturing BOM...</p>
							<p>A way to describe engineering, service</p>
							<p>Combined with CAD</p>
							<p>3D authoring implemented alongside messaging</p>
						</aside>
					</section>
					
				</section>
				
				
				<!-- Further developments -->
				<section data-background="img/A_General_Electric_F110_engine_in_max_power.jpg" data-background-opacity="0.3" data-background-size="110%">
					
					<section>
						<h5>In Closing</h5>
					</section>
					
					<!-- Current state -->
					<section>
						<h3>Current State</h3>
						<ul>
							<li>Proof of concept done (and works!)</li>
							<li>Several message types remain</li>
							<li>BOM-related development ongoing</li>
							<li>Other publishing formats (reviews)</li>
						</ul>
						
						<aside class="notes">
							<p>CSNIPD is the most complex type</p>
							<p>Form-based approach likely</p>
						</aside>
					</section>
					
					<section>
						<h3>The Future</h3>
						<ul>
							<li>S2000M 7.1/8.0 - 2.1 was always a temporary measure</li>
							<li>The entire S-series</li>
						</ul>
					</section>
					
					<section>
						<p>Thanks to...</p>
						<ul>
							<li>John Lumley and his awesome jωiXML processor</li>
							<li>Steven Pemberton</li>
							<li>The entire iXML community</li>
							<li>Mike Day, one of UK's foremost S2000M experts</li>
						</ul>
						
					</section>
					
					<section>
						<h5>Questions?</h5>
					</section>
					
				</section>
				
				
			</div>
		</div>
		
		
		<!-- Uncomment for filesystem run -->
		
		<!--<script src="../../reveal.js/dist/reveal.js"></script>
		<script src="../../reveal.js/plugin/notes/notes.js"></script>
		<script src="../../reveal.js/plugin/markdown/markdown.js"></script>
		<script src="../../reveal.js/plugin/highlight/highlight.js"></script>
		<script src="../../reveal.js/plugin/zoom/zoom.js"></script>-->
		
		
		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		
		
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				
				slideNumber: false,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
			});
		</script>
	</body>
</html>
